{% extends "base.html" %}
{% block content %}
<div class="admin-header">
  <h2>Kelola Projects</h2>
  <a href="{{ url_for('admin_project_new') }}" class="btn btn-success btn-sm">+ Tambah Project</a>
</div>

{% if projects %}
<table class="table table-striped table-hover align-middle shadow-sm">
  <thead>
    <tr>
      <th>#</th>
      <th>Gambar</th>
      <th>Judul</th>
      <th>Link</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody>
    {% for project in projects %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>
        {% if project.image %}
        <img src="{{ url_for('uploaded_file', filename=project.image) }}" width="60" height="60" alt="">
        {% endif %}
      </td>
      <td>{{ project.title }}</td>
      <td>
        {% if project.link %}
        <a href="{{ project.link }}" target="_blank" class="text-decoration-none">Lihat</a>
        {% endif %}
      </td>
      <td>
        <a href="{{ url_for('admin_project_edit', project_id=project.id) }}" class="btn btn-primary btn-sm">Edit</a>
        <form action="{{ url_for('admin_project_delete', project_id=project.id) }}" method="POST" style="display:inline;">
          <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Hapus project ini?')">Hapus</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="empty-state">Belum ada project yang ditambahkan.</div>
{% endif %}
{% endblock %}